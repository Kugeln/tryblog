---
title: 计算机组成原理
date: 2024-04-15 13:57:06
tags: 408专业课	
sticky: 141
categories: 408
banner_img: /img/1920x1080 (7).jpg
index_img: /img/1920x1080 (7).jpg
math: true
---

## 第一章 计算机系统概述

### 1.1计算机发展历程

* 低电平表示二进制0
* 高电平表示二进制1
* 金属针脚用来接受和发送电信号二进制数，每个二进制数位称为1bit
* 计算机性能的好坏取决于软硬件功能的总和
* 机器字长：计算机一次整数运算所能处理的二进制位数
* 摩尔定律：集成电路上可容纳的晶体管数目，约每隔18个月便会增加一倍，整体性能也将提升一倍

### 1.2计算机硬件的基本组成

![](/img/145732.jpg)

#### 早期冯诺依曼机的结构

![](/img/144503.jpg)

##### 特点

* 采用存储程序的工作方式
  * 将指令以二进制代码的形式事先输入计算机的主储存器（内存），然后按其在存储器中的首地址执行程序的第一条指令，以后就按该程序的规定顺序执行其他指令，直至程序执行结束
  * 得以实现自动化地执行代码
* 计算机由五大部件组成
  * 运算器
  * 控制器
  * 存储器
  * I/O设备
* 指令和数据以同等地位存于存储器，可按地址寻访
  * CPU区分指令和数据的依据是二者访问阶段的不同
* 指令和数据用二进制表示
* 指令由操作码（操作类型）和地址码（操作数据的地址）组成
* 以运算器为中心
  * 输入/输出设备与存储器之间的数据传送通过运算器完成
    * 导致数据计算效率的降低

#### 现代计算机的结构

![](/img/145236.jpg)

![](/img/145449.jpg)

##### 特点

* 以存储器为中心
* CPU=运算器+控制器
* 指令存放于控制器当中，由控制器来解析并且发出相应的控制信号
* 注：辅存主要指机械硬盘固态硬盘等，不属于主机内容而属于I/O设备，例如我们手机里的APP平时储存在辅存里面，只有使用的时候才会把辅存里边的app相关的程序数据代码读到主存里边

### 1.3各个硬件的工作原理

![](/img/163027.jpg)

#### 主存储器

##### 基本组成

* 存储体

  * 用于存放数据，由一系列的存储元件构成，用于存放零和一

  * `数据在存储体内按地址存储`

    ![](/img/151037.jpg)

    * 存储单元：每个存储单元存放一串二进制代码
    * 存储字：存储单元中二进制代码的组合
    * 存储字长：存储单元中二进制代码的位数
    * 存储元：即存储二进制的电子元件，每个存储元可存1bit（电容存储）

* 寄存器

  * 注：现在的计算机通常把MAR、MDR也集成在CPU内
  * MAR（存储地址寄存器）
    * MAR位数反映了存储单元的个数（最多支持多少个）
  * MDR（存储数据寄存器）
    * MDR位数=存储字长（bits）=每个存储单元的大小
  * 读取

  ![](/img/150346.jpg)

  * 写入

  ![](/img/150449.jpg)

#### 运算器

用于实现算术运算（加减乘除）、逻辑运算（与或非）

![](/img/151924.jpg)

##### 基本组成

* ACC：累加器，用于存放操作数或者运算结果
* MQ：乘商寄存器，在乘、除运算时，用于存放操作数或者运算结果
* X：通用的操作数寄存器，用于存放操作数
* `ALU：算数逻辑单元，通过复杂的电路实现算数运算、逻辑运算，上面为数据储存结构`

#### 控制器

##### 基本组成

* `CU：控制单元，分析指令，给出控制信号`
* IR：指令寄存器，存放当前执行的指令
* PC：程序计数器，存放下一条指令地址，有自动加1的功能

* 完成一条指令的流程：
  * 取指令 PC
  * 分析指令 IR
  * 执行指令 CU

#### 计算机的工作过程

* 过程演示

![](/img/155208.jpg)

![](/img/155801.jpg)

![](/img/161851.jpg)

![](/img/162123.jpg)

![](/img/162450.jpg)

![](/img/162559.jpg)

* 总结

![](/img/162909.jpg)

### 1.4计算机系统的多级层级结构

![](/img/171555.jpg)

#### 计算机系统的层次结构

![](/img/171039.jpg)

![](/img/171511.jpg)

### 1.5计算机的性能指标

![](/img/194628.jpg)

#### 存储器的性能指标

![](/img/172819.jpg)

* 存储器的容量

  * 总容量=存储单元个数*存储字长

    ​            =存储单元个数*存储字长/8

#### CPU的性能指标

* CPU主频：CPU内数字脉冲信号震荡的频率，表示的是每秒钟会有多少个数字脉冲，即会出多少个时钟周期

  * 如10Hz可能是每秒钟有10个脉冲信号

  ![](/img/191603.jpg)
  
  ![](/img/093500.jpg)

$$
CPU时钟周期=\frac{1}{主频}
$$

$$
CPU执行时间（整个程序的耗时）=\frac{CPU时钟周期数}{主频}=CPU时钟周期数*时钟周期
$$

$$
CPU执行时间=\frac{指令条数*CPI}{主频}=CPI*指令条数*时钟周期
$$


$$
CPI=\frac{CPU时间*时钟频率}{指令条数}=\frac{CPU时钟周期数}{指令条数}
$$


$$
CPI=\sum^n_{i=1}(CPI_i*F_i)=\frac{CPU时钟周期数}{指令条数}
$$

$$
总时钟周期数=\sum^n_{i=1}(CPI_i*C_i)
$$

$$
IPS（每秒执行多少条指令）=\frac{主频}{平均CPI}=\frac{指令条数}{执行时间（秒）}
$$

* 平均CPI=∑各指令CPIx指令混合比
* 同一套指令集意味着指令总数相同

#### 系统整体的性能指标

* 数据通路带宽：数据总线一次所能并行传送信息的位数（各硬件部件通过数据总线传输数据）

* 吞吐量：指系统在单位时间内处理请求的数量
  * 它取决于信息能多快地输入内存，CPU能多快地取指令，数据能多快地从内存取出或存入，以及所得结果能多快地从内存送给一台外部设备。这些步骤中的每一步都关系到主存，因此，系统吞吐量主要取决于主存的存取周期。（了解即可）
* 响应时间：指从用户向计算机发送一个请求，到系统对该请求做出相应并获得它所需要的结果的等待时间
  * 通常包括CPU时间（运行一个程序所花费的时间）与等待时间（用于磁盘访问、存储器访问、I/O操作、操作系统开销等时间）（简单了解即可）

#### 系统整体的性能指标（动态测试）

* 基准程序（跑分软件）是用来测量计算机处理速度的一种实用程序，以便于被测量的计算机性能可以与运行相同程序的其他计算机性能进行比较

#### 提高计算机性能的主要途径

* 提高时钟频率（流水线）
* 优化处理其中数据通路的结构以降低CPI（单周期/多周期/流水线）
* 采用编译优化措施来减少指令条数或降低指令复杂度（指令系统）

## 第二章 数据的表示和运算

### 2.1数制与编码

#### 2.1.1 进位计数制

![](/img/194427.jpg)

##### r进制计数法

![](/img/192649.jpg)

![](/img/193026.jpg)

##### 二进制与八进制、十六进制互相转换

* 二到八

![](/img/193146.jpg)

* 二到十六

![](/img/193224.jpg)

* 八到二

![](/img/193324.jpg)

* 十六到二

![](/img/193400.jpg)

##### 十进制转化为任意进制

* 整数部分

![](/img/193825.jpg)

* 小数部分

![](/img/194015.jpg)

* 拼凑法转化为二进制

![](/img/194120.jpg)

#### 2.1.2 BCD（用二进制编码的十进制数）码

![](/img/202034.jpg)

* 四个二进制位表示一个十进制位

![](/img/195755.jpg)

* 8421码映射关系（有权码）

![](/img/195910.jpg)

![](/img/201051.jpg)

![](/img/201326.jpg)

![](/img/201339.jpg)

![](/img/201531.jpg)

* 余3码（无权码）

![](/img/01731.jpg)

* 2421码（有权码）

0-4的首位一定是0，5-9的首位一定是1

![](/img/201940.jpg)

#### 2.1.3 无符号整数的表示和运算

![](/img/203330.jpg)

![](/img/202247.jpg)

##### 无符号整数的表示

![](/img/202618.jpg)

##### 无符号整数的加法运算

![](/img/202806.jpg)

##### 无符号整数的减法运算

![](/img/203011.jpg)

![](/img/203228.jpg)

#### 2.1.4 带符号整数的表示和运算 原反补

![](/img/210101.jpg)

![](/img/203430.jpg)

![](/img/203630.jpg)

##### 原码表示

![](/img/203927.jpg)

![](/img/204046.jpg)

##### 原码→反码→补码的转换（机算）

![](/img/204256.jpg)

##### 原码、补码快速转换技巧（手算）

![](/img/204650.jpg)

##### 补码的加法运算

![](/img/205003.jpg)

![](/img/205325.jpg)

* 注：由于补码数值不能解读为位权，因此真值需要转换为原码再去找真值

##### 补码的减法运算

* 机算

![](/img/205603.jpg)

* 手算
  * 找到第一个1，然后1的左边的所有位数包括符号位在内取反，右边保持不变

##### 对比：无符号整数的减法运算

* 无论是带符号整数还是无符号整数的减法，都是被减数不变，减数全部位按位取反、末位+1，减法变加法
* 计算机内部，所有带符号整数的加减法都要先转化为补码（当然C语言的带符号整数都是用补码来表示的）

![](/img/205857.jpg)

#### 2.1.5 原反补码的特性对比

![](/img/210300.jpg)

##### 各种码的基本特性总结

![](/img/233057.jpg)

#### 2.1.6 移码

![](/img/232157.jpg)

![](/img/232345.jpg)

![](/img/233024.jpg)

![](/img/233200.jpg)

* 移码：补码的基础上将符号位取反。注意：移码只能用于表示整数。

#### 2.1.7 定点小数

![](/img/233350.jpg)

![](/img/233506.jpg)

* 定点小数的符号位后面常常用“.”隔开，而定点整数的符号位后面常常用“，”隔开

##### 定点小数原/反/补码的转换

![](/img/220352.jpg)

##### 定点小数的加/减运算

![](/img/220502.jpg)

##### 定点小数vs定点整数

![](/img/220732.jpg)

![](/img/221006.jpg)

##### 小数补码的加法运算

![](/img/221322.jpg)

##### 小数补码的减法运算

![](/img/221432.jpg)

### 2.2

#### 2.2.0 奇偶校验码

##### 校验原理简介

![](/img/223201.jpg)

![](/img/223333.jpg)

##### 奇偶校验码

![](/img/223555.jpg)

* 奇偶校验码的缺点：只能发现奇数个位发生传输错误，不能发现偶数个位发生传输错误

偶校验码的硬件实现

 ![](/img/224356.jpg)

#### 2.2.1 电路的基本原理、加法器设计

##### 算术逻辑单元（ALU）

![](/img/225001.jpg)

* 控制信号是由控制单元cu发出的

![](/img/230645.jpg)

* M用来表示做的是逻辑运算还是算术运算，1是逻辑运算，0是算术运算
  * S0-S3可以用来指明此次要进行的是哪一种算术运算或者哪一种逻辑运算
  * 此处有4个bit，可以对应16种状态，因此该芯片可以支持16种算术运算和16种逻辑运算
* 机器字长的真面目就是ALU算术逻辑单元里面可以支持同时输入多少个比特的信息
* 寄存器的位数和ALU一般保持一致，也即一般寄存器的位数就是机器字长
* 其余输入和输出信号一般是为了和其他芯片进行串联而设计的

##### 最基本的逻辑运算

* 一个比特的逻辑运算
* 关于数据的输入和输出，我们都是用电信号来表示的，也就是高低电平
* 与门

![](/img/231008.jpg)

* 或门

因为只要有一个1结果就是1，即>=1

![](/img/231213.jpg)

* 非门

![](/img/231334.jpg)

* 优先级：与>或

![](/img/231709.jpg)

##### 复合逻辑

* 异或门可用与、或、非组合实现

![](/img/232133.jpg)

![](/img/232213.jpg)

#### 2.2.2 并行进位加法器

#### 2.2.3 补码加减运算器

#### 2.2.4 标志位的生成

#### 2.2.5 定点数的移位运算

#### 2.2.6.1 原码的乘法运算

#### 2.2.6.2 补码的乘法运算

#### 2.2.7.1 原码的除法运算

#### 2.2.7.2 补码的除法运算

#### 2.2.8 C语言类型转换

#### 2.2.9 数据的存储和排列

### 2.3

#### 2.3.1 浮点数的表示

#### 2.3.2 IEEE 754