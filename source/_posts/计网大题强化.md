---
title: 计网大题强化
date: 2025-06-24 21:37:22
tags: 408日常
sticky: 272
banner_img: /img/1920x1080 (41).jpg
index_img: /img/1920x1080 (41).jpg
---

* 真题应反复多做，千万别舍不得
* 真题的抹开分数无法代表任何东西，别自负、更别自卑
* 计网真题要分类做，更能感受命题规律
* 计网真题每年只有8道真题、1道大题，全部真题分类二刷一遍，8~10天足矣

## 计算机网络各种协议

![](/img/jisuanjiwangluoxieyi.png)

![](/img/jiwangxieyi.png)

* 数据链路层
  * PPP协议，点对点协议
  * CSMA协议
    * 1-坚持
      * 一直看路，路空就走
    * 非坚持
      *  路没空低头看手机，随机一段时间再抬头看
    * p-坚持
      * 一直看路，路空有概率走也有概率不走
  * CSMA/CD协议，有线局域网
    * 走前先看路，走的时候一直看，要撞了就回去，随机一段时间再出发
  * CSMA/CA协议，无线局域网
    * 走前看路，路空等一段时间还是空就出发，撞了就回退并开始计时，空闲就继续倒计时，倒计时为0重新出发
  * ALOHA协议，随机访问介质访问控制协议/争用型协议
    * 人和车随时可以通行，相撞后等待一段随机的时间进行重传
  * 时隙ALOHA协议，随机访问介质访问控制协议/争用型协议
    * 每个时间段开始的时候人或车才能走，撞了以后等一段时间
  * 网络适配器
  * HDLC协议

* 网络层
  * IP协议
  * ICMP协议
  * ARP协议
  * RARP（逆地址解析协议）
  * SDN
  * Traceroute/Tracert
  * IGP内部网关协议
    * OSPF，直接用IP数据报
  * IGMP（网际组管理协议），封装在IP数据报中传送

* 传输层
  * TCP协议
  * NAT
  * UDP协议

* 应用层
  * EGP外部网关协议
    * BGP-4，基于TCP
  * RIP
    * 路由信息协议
    * 分布式的基于距离向量的路由选择协议
    * 基于UDP
  * FTP协议
    * 文件传送
    * 基于TCP
  * DHCP协议
    * 基于UDP
    * ip地址分配
  * PING，直接使用网络层的ICMP
  * 移动ip归属代理代理功能的实现
  * DNS
    * 基于UDP
    * 域名解析
  * TFTP
    * 简单文件传送协议
    * 基于UDP
  * SNMP
    * 简单网络管理协议
    * 基于UDP
  * SMTP
    * 简单邮件传送协议
    * 基于TCP
  * TELNET
    * 远程终端协议，远程终端接入
    * 基于TCP
  * HTTP
    * 超文本传送协议
    * 万维网
    * 基于TCP
    * 本身是无连接的，虽然http使用了tcp链接，但通信的双方在交换http报文之前不需要先建立http链接
  * 使用客户/服务器模型
    * Web
    * FTP文件传输协议
    * 远程登录
    * 电子邮件
  * 电子邮件协议
    * SMTP
      * 邮件发送协议
    * POP3
      * 邮件读取协议
      * 基于TCP
    * IMAP

## 概述

![](/img/jhndgbfdv.png)

![](/img/vervrev.png)

* **通常就是选择题第一题 2分**

* OSI参考模型
  * 主考记忆
  * 层次顺序，各层关系
    * 物、链、网、输、会、示、用
  * 各层功能
* TCP/IP模型
  * 各层协议之间的关系

### OSI和TCP/IP模型梳理

* OSI（记忆、各层关系、功能）

  * OSI参考模型中，网络层采用**虚电路**连接

    * 提供可靠有序的虚电路服务，支持无连接和面向链接的通信
      * 虚电路不需要预分配带宽
      * OSI参考模型中路由器的路由表会记录虚电路号(VCID)和下一跳地址
    * 虚电路服务在两台主机开始正式传输之前，需要通过OSI的第三层网络层去建立一个虚电路，这条虚电路会对应一个VCID虚电路号
      * 虚电路在建立的时候需要进行路由选择规划道路，建立后转发路径不发生改变
      * 当左边这台主机发出自己的IP数据报或者说IP分组的时候，只需要指明自己要发的这个IP分组的VCID，即通过哪一条虚电路进行转发
      * 当分组或者数据报经过A主机的时候，A主机这边会记录一个表，表包括VCID和下一跳
        * 不会检查IP数据报里的目的地址，检查的是虚电路号，然后通过虚电路号找到下一跳

    ![](/img/110114.jpg)

    ![](/img/111433.jpg)

    ![](/img/11653.jpg)

    ![](/img/111729.jpg)

  * 设计者认为应该由**网络层提供可靠、有序的传输服务**

  * 会话层和表示层的功能和位置

    * 会话层
      * 会话管理（**断点重传**）
        * 传文件传到一半，断了，重新连接之后可以断点重传
    * 表示层
      * 编码
        * 不同主机上对于各种字符信息的编码显示可能不一样，表示层解决**各个主机编码不一样**的问题
      * 数据格式转换

  * **网络层**实现的是**主机到主机**之间的传输

    * **传输层**实现的是**端到端（进程到进程）**之间的传输
    * **数据链路层**实现的是**相邻结点**之间的传输

* TCP/IP（各种协议之间的关系）

  ![](/img/87i574.png)

  * 数据链路层&物理层协议（网络接口层）
    * 802.3CSMA/CD
      * 以太网
    * 802.11CSMA/CA
      * 无线局域网
    * 802.5令牌传递协议
  * 网络层
    * ARP
      * 需要使用链路层的某一个协议去服务
    * IP
      * 可以使用链路层的某一个协议去服务
        * 当我们说一个协议为另一个协议服务的时候，本质上是我们再强调**这个协议的服务数据单元（SDU）携带的是被服务协议的协议数据单元（PDU）**
  * 传输层
    * TCP
      * 使用IP协议
    * UDP
      * 使用IP协议
      * **无连接服务**
  * 应用层
    * SMTP/POP3（电子邮件）
      * 使用TCP
    * HTTP（浏览网页）
      * 使用TCP
    * DNS
      * 使用UDP
    * DHCP（动态主机配置获得IP地址）
      * 使用UDP
    * FTP（文件传输）
      * 使用TCP

## 物理层

![](/img/,umjhngfd.png)

![](/img/bu564v534cx3.png)

* 选择题

* **模拟信号**

  * **调制**

    ![](/img/647nb3.png)

    ![](/img/56b4v.png)

    * ASK
      * 调幅AM
      * 幅度
      * 4种幅度可以表示2bit
    * FSK
      * 调频FM
      * 频率
      * 8种振幅意味着3bit
    * PSK
      * 调相PM
      * 相位
      * 8种相位意味着4bit
    * QMA
      * 正交幅度调制
      * QAM-16意味着总共有16种信号，4bit

  * 香农

    * **有噪声信道**上，极限**比特率**（数据传输速率）=Wlog2（1+S/N)   b/s
      * W是带宽（单位为hz）
      * S是信道内所传输信号的平均功率
      * N为信道内的高斯噪声功率
      * S/N为信噪比，无单位记法时信噪比=S/N，采用分贝记忆法时，信噪比=10log10（S/N）

  * 奈氏

    * **无噪声信道**上，极限**波特率**=2W（以**Hz**为单位的**带宽**）
    * 极限**数据传输速率（比特率）**=2Wlog2V b/s（V是一个码元的离散电平数量）

  * 码元、bit的关系

    * **每个周期的信号对应一种码元，而一个码元能携带多少个bit就得看一个周期内的信号有多少种**

  * 波特率

    * 每秒传输的**码元数**

  * 比特率

    * 每秒传输的**bit数**

* **数字信号** 波形

  * **编码**

  ![](/img/7n46b.png)

  ![](/img/68m57.png)

  ![](/img/9m789n.png)

## 数据链路层

![](/img/98kujrytb.png)

* 选择题

  * **CSMA/CA**

    ![](/img/7n85.png)

    * 画图（预约信道）

    ![](/img/ury.png)

    ![](/img/wevr.png)

    * 三个地址

    ![](/img/Q232C2.png)

    ![](/img/5-06-25 141537.jpg)

    * **无线**通信当中，**无线局域网**使用
      * 手机和路由器

  * **CSMA/CD**

    * **以太网**（**最短帧长**）

    * **冲突检测（边发边检；冲突停发）**

      ![](/img/h4q.png)

      * 节点间的最长距离（距离是题目变量）
        * ①计算出最短的帧的发送时间
        * ②根据**最短帧发送时间大于等于两倍单向传播时间**
        * ③结合信号在信道上的**传播速度**，计算出信道的最长距离等于多少
      * 距离固定，冲突检测的**最短**或者**最长**时间
        * 最短帧长和传输速率，就可以计算出发出一个最短的帧需要多长时间
        * **发出一个帧最短所需要的时间不能小于二倍的单向传播时延**
        * 计算出上述条件之后，再结合信号的传播时间、信号的传播速度，就可以得知节点之间的**最长的距离**等于多少

* 大题：通常结合高层协议考察

  * 链路层MAC帧通常会和高层协议结合起来考察（**如何封装成帧**）

  * ARP

    ![](/img/twrh.png)

    ![](/img/qcewcew.png)

    * 要能从空ARP表开始分析
    * **广播找人，单播回应**
    * 网络层协议，定义了ARP分组，和IP分组是两个独立的东西，是单独的数据结构
    * 会被封装到链路层MAC帧里面，最终要实现地址解析，要通过几个ARP分组的传输，找到一个IP地址对应的MAC地址等于多少
    * 如果一台主机要发送一个IP分组给另一台主机，但是**另一台主机刚好与自己从属于从一个局域网**，这种情况下**需要把IP分组封装成一个MAC帧**。MAC帧当中应该直接指明与我从属于同一个局域网的那个目的主机，它的MAC地址等于多少
    * 如果一台主机要发送的目的主机并不在本网络内，那么此时发送方得把这个IP数据报发送给**默认网关**，默认网关也有一个MAC地址，所以这个IP数据报发送给默认网关的时候，也需要把**目的MAC地址填写为默认网关的MAC地址**
    * 也就是说，当我构造一个IP数据报的时候，一旦确定了目的IP地址，那么如果**目的IP地址直接就是和我在同一个网络**，那就需要**用ARP协议查到目的IP地址对应的MAC地址** 
    * 运行只需要发出一个ARP分组（请求），被查询的一方回复一个ARP响应分组,ARP协议的工作就完成了
    * 每一台主机内部都有一张ARP表，记录了**自己已经查询到的IP地址和MAC地址之间的映射关系**
    * ARP分组里面必须指明**想要找的主机的IP地址，我的IP地址，我的MAC地址**，之后**MAC帧的目的地址全1（广播）**
    * 想要找的主机收到ARP请求分组之后，会构造一个ARP相应分组返回给“我“
      * 内容包括**被查询主机的MAC地址和IP地址**
      * 不需要广播，直接单播
    * 收到ARP响应分组之后，会把收到的**IP地址和MAC地址之间的映射关系**记录到ARP表中

  * IP

    ![](/img/y4n.png)

    ![](/img/5vc3.png)

    ![](/img/n5nb6b.png)

    ![](/img/675b5v4.png)

    ![](/img/trvev.png)

    * 太长

      * 分片问题

        * 最长1500B（MTU最大传输单元）
        * 418首总偏
          * 偏移量表示的是每个IP数据包当中，它携带的数据**在原始IP数据报当中的位置**
          * **偏移量必须是8字节的整数倍，最后一个分片除外**
        * 每一个分片都有自己的IP首部，而首部当中都包含418首总偏这几个字段
        * 还有MF（是否还有其他分片）DF（是否允许分片）
          * 如果链路层无力承担大的IP数据报，但是原IP数据报的DF又=1，此时只能把IP数据报丢掉，再通过一个ICMP报文告诉发送IP数据报的源节点，IP数据报已经被丢掉，发生了异常
            * ICMP协议本质就是网络当中的异常通知机制

      * 例子

        ![](/img/61259.jpg)

        * 假设IP数据报首部20B，数据2000B，假设其链路层的MTU=800
          * DF字段的值取决于源IP数据报
          * 第一个分片
            * MF=1，DF=0
            * 首部20B，总长度796B，偏移量0
          * 第二个分片
            * MF=1，DF=0
            * 首部20B，总长度796B，偏移量97
          * 第二个分片
            * MF=0，DF=0
            * 首部20B，总长度468B，偏移量194

    * 太短

      * 填充问题
      * 不能小于46字节
      * 路由器收到IP数据包的时候如何区分这个IP数据报真实的数据是多少？
        * 418首（首部长度）总（总长度）偏（偏移量）

    * 路由器转发后帧的地址变换

  * DHCP（**参考海投简历找工作流程**）

    ![](/img/uytres.png)

    ![](/img/0888io.png)

    ![](/img/wxewxww.png)

    * 要能分析DHCP全过程，**每个报文被如何封装**
    * **四个DHCP报文的目的MAC地址和源MAC地址如何配置**
      * 假设H3新加入网络
        * ①刚接入网络的时候，没有被分配IP地址，需要跟**本网络的DHCP服务器**发生通信，请求DHCP服务器给自己分配一个**IP地址及配置默认网关、配置子网掩码**
          * H3天生携带的只有**MAC地址**
        * ②涉及四个报文
          * **第一**个报文**发现报文**
            * 说明自己的**MAC地址**
            * 在链路层会被封装成**MAC帧**
              * **目的MAC地址**是**广播地址**，**48bit全1**
                * 因为h3刚加入网络不知道DHCP服务器的MAC地址是多少
                * 因此DHCP发现报文**会被整个网络内所有的节点收到，但是应用层只有DHCP服务器接收**
              * **源MAC地址**是自己的MAC地址
          * **第二**个报文**提供报文**
            * 提供**IP地址、子网掩码、默认网关**
            * **单播帧**
              * **目的MAC**是**新加入的主机MAC地址**
              * **源MAC**是**DHCP服务器的MAC地址**
          * **第三**个报文**请求报文**
            * 在一个局域网内部可能会有很多台DHCP服务器
              * 也就是说H3发出第一个DHCP发现报文的时候，网络内所有的DHCP服务器都会收到，每一台都会以为这个节点在跟自己索要IP地址。
              * 因此H3可能被多个DHCP服务器分配IP地址
              * 因此H3需要发送请求报文向**网络内所有DHCP服务器告知自己的IP地址是哪个DHCP服务器分配的**
              * 因此请求报文的**目的MAC是广播地址**
            * **广播帧**
          * **第四**个报文**确认报文**
            * 确认H3的IP地址是该DHCP服务器分配的
            * **单播帧**
    * **IP地址如何分配**
      * ①**发现报文**
        * 刚开始没有IP地址，因此**源IP地址全0**
        * 刚加入不知道DHCP服务器的IP地址，**目的IP地址为广播地址，全1**
      * ②**提供报文**
        * **目的IP地址广播地址**，因为H3目前还没有IP地址，为了**防止H3的网络层过滤掉这个IP数据报**，应该用广播IP去告诉H3应该接收
          * 因为每台主机的网络层都会检查目的IP地址是多少，如果**目的IP地址和自己的IP地址相同或者是广播地址**，这些主机才会接收这个IP数据报
        * **源IP地址是DHCP服务器自己的**
      * ③**请求报文**
        * 因为尚未确定IP地址，所以**源IP地址依旧是全0**
        * 因为有多个DHCP服务器，H3要告诉所有分配IP的DHCP服务器，最终自己接收了哪个DHCP服务器发来的IP地址，因此**目的IP是广播IP**，以防DHCP服务器的网络层把这个IP数据报过滤掉
      * ④**确认报文**
        * H3还没有真正确定自己的IP地址，因此**目的IP地址仍然是广播IP**，这样才能确保H3的网络层不要把这个IP数据报过滤掉